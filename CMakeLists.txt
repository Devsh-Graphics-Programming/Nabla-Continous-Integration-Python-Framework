include(common)

set(NBL_PYTHON_FRAMEWORK_RUNALLTESTS_SCRIPT_ABS "${CMAKE_CURRENT_SOURCE_DIR}/scripts/__main__.py.cmake" PARENT_SCOPE)
set(NBL_PYTHON_FRAMEWORK_IMPORT_SCRIPT_ABS "${CMAKE_CURRENT_SOURCE_DIR}/scripts/import/nbl.py.cmake" PARENT_SCOPE)
set(NBL_PYTHON_FRAMEWORK_PROXY_SCRIPT_ABS "${CMAKE_CURRENT_SOURCE_DIR}/src/framework.py" PARENT_SCOPE)
set(NBL_PYTHON_FRAMEWORK_VS_LAUNCH_JSON_ABS "${CMAKE_CURRENT_SOURCE_DIR}/cmake/launch.json.cmake" PARENT_SCOPE)
set(NBL_PYTHON_FRAMEWORK_VS_SETTINGS_JSON_ABS "${CMAKE_CURRENT_SOURCE_DIR}/cmake/settings.json.cmake" PARENT_SCOPE)
set(NBL_PFT_SOURCE_GROUP_NAME "Python Framework" PARENT_SCOPE)

file(GLOB_RECURSE NBL_PYTHON_FRAMEWORK_SOURCES "${CMAKE_CURRENT_SOURCE_DIR}/src/*.py")
set(NBL_PYTHON_FRAMEWORK_SOURCES 
	${NBL_PYTHON_FRAMEWORK_SOURCES}
PARENT_SCOPE)

foreach(_NBL_FILEPATH_ IN LISTS NBL_PYTHON_FRAMEWORK_SOURCES)
    NBL_TEST_MODULE_INSTALL_FILE("${_NBL_FILEPATH_}")
endforeach()

function(NBL_TARGET_ATTACH_PYTHON_FRAMEWORK _NBL_TARGET_)
	target_sources(${_NBL_TARGET_} PUBLIC ${NBL_PYTHON_FRAMEWORK_SOURCES})
	source_group(TREE "${CMAKE_CURRENT_FUNCTION_LIST_DIR}" PREFIX "${NBL_PFT_SOURCE_GROUP_NAME}/library" FILES ${NBL_PYTHON_FRAMEWORK_SOURCES})
endfunction()
